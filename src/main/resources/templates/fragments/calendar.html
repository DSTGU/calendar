<div th:fragment="month" class="card shadow-sm h-100 border-0 rounded-3">
  <div
    class="card-header bg-primary text-white text-center fw-bold rounded-top d-flex flex-row justify-content-between align-items-center"
  >
    <button
      type="button"
      class="btn btn-sm btn-light"
      th:attr="onclick=|loadMonth('${month.previousMonth()}')|"
    >
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    <div class="d-flex flex-row gap-2">
      <span class="fw-bold"> <i class="fa-solid fa-calendar"></i> </span>
      <div th:text="${month.name}"></div>
    </div>

    <button
      type="button"
      class="btn btn-sm btn-light"
      th:attr="onclick=|loadMonth('${month.nextMonth()}')|"
    >
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <div class="card-body p-0 d-flex flex-column h-100">
    <!-- Weekdays header -->
    <div
      class="calendar-header text-center fw-semibold border-bottom text-muted"
    >
      <div class="day-column border" th:each="day : ${weeks.get(0).days}">
        <!-- Day header -->
        <div
          class="day-header text-center fw-semibold border-bottom py-2 text-muted"
        >
          <span th:text="${#temporals.dayOfWeekName(day.date)}"></span>
        </div>
      </div>
    </div>

    <!-- Weeks -->
    <div class="flex-grow-1 d-flex flex-column">
      <div
        class="calendar-week flex-fill"
        th:each="week : ${weeks}"
        th:attr="onclick=|loadWeek('${week.days.get(0).date}')|"
        style="cursor: pointer"
      >
        <div
          class="day-cell border text-dark fw-light"
          th:each="day : ${week.days}"
          th:text="${day.date.getDayOfMonth}"
          th:classappend="${day.textColor}"
        ></div>
      </div>
    </div>
  </div>

  <style>
    /* Force 7 equal-width columns */
    .calendar-header,
    .calendar-week {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
    }

    .calendar-header {
      background-color: #f8f9fa;
      font-size: 0.9rem;
    }

    .calendar-week {
      flex: 1; /* each week takes equal vertical height */
    }

    .day-cell {
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s, font-weight 0.2s;
    }

    .day-cell:hover {
      background-color: #f0f4ff;
      font-weight: 600;
    }
  </style>
</div>

<div th:fragment="week" class="card shadow-sm h-100 border-0 rounded-3">
  <div
    class="card-header d-flex align-items-center justify-content-between bg-primary text-white rounded-top"
  >
    <div class="d-flex flex-row gap-2">
      <button
        type="button"
        class="btn btn-sm btn-light"
        th:attr="onclick=|loadWeek('${week.previousWeek}')|"
      >
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <button
        type="button"
        class="btn btn-sm btn-light"
        th:attr="onclick=|loadMonth('${week.monthDate}')|"
      >
        <i class="fa-solid fa-arrow-left"></i>
      </button>
    </div>
    <div class="d-flex flex-row gap-2 fw-bold align-items-center">
      <i class="fa-solid fa-calendar"></i>
      <div th:text="${week.name}"></div>
    </div>
    <button
      type="button"
      class="btn btn-sm btn-light"
      th:attr="onclick=|loadWeek('${week.nextWeek}')|"
    >
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <div class="card-body p-0 d-flex flex-column h-100">
    <!-- Days grid -->
    <div class="calendar-week-view flex-grow-1">
      <div class="day-column border" th:each="day : ${days}">
        <!-- Day header -->
        <div
          class="day-header text-center fw-semibold border-bottom py-2 text-muted"
        >
          <span th:text="${#temporals.dayOfWeekName(day.date)}"></span>
        </div>

        <!-- Day content -->
        <div
          class="day-content p-2 text-center"
          th:attr="onclick=|loadDay('${day.date}')|"
        >
          <p
            th:text="${day.date.getDayOfMonth}"
            th:class="${day.textColor + ' fw-light'}"
          ></p>
        </div>
      </div>
    </div>
  </div>

  <style>
    .calendar-week-view {
      display: grid;
      grid-template-columns: repeat(7, 1fr); /* 7 equal columns */
      height: 100%;
    }

    .day-column {
      display: flex;
      flex-direction: column;
      min-width: 0; /* fixes flex overflow in some browsers */
    }

    .day-header {
      background-color: #f8f9fa;
      font-size: 0.9rem;
    }

    .day-content {
      flex: 1; /* fill remaining vertical space */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
  </style>
</div>

<div th:fragment="day" class="card shadow-sm h-100 border-0 rounded-3">
  <div
    class="card-header d-flex align-items-center justify-content-between bg-primary text-white rounded-top"
  >
    <div class="d-flex flex-row gap-2">
      <button
        type="button"
        class="btn btn-sm btn-light"
        th:attr="onclick=|loadDay('${day.previousDay}')|"
      >
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <button
        type="button"
        class="btn btn-sm btn-light"
        th:attr="onclick=|loadWeek('${day.date}')|"
      >
        <i class="fa-solid fa-arrow-left"></i>
      </button>
    </div>
    <div class="d-flex flex-row gap-2 fw-bold align-items-center">
      <div th:text="${day.name}"></div>
    </div>
    <button
      type="button"
      class="btn btn-sm btn-light"
      th:attr="onclick=|loadDay('${day.nextDay}')|"
    >
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <div class="day-content p-2 text-center">
    <div class="d-flex flex-row">
      <div class="border border-1"></div>
      <div class="border border-1"></div>
    </div>
  </div>

  <style>
    .calendar-week-view {
      display: grid;
      grid-template-columns: repeat(7, 1fr); /* 7 equal columns */
      height: 100%;
    }

    .day-column {
      display: flex;
      flex-direction: column;
      min-width: 0; /* fixes flex overflow in some browsers */
    }

    .day-header {
      background-color: #f8f9fa;
      font-size: 0.9rem;
    }

    .day-content {
      flex: 1; /* fill remaining vertical space */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
  </style>
</div>
